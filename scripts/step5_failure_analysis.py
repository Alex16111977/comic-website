#!/usr/bin/env python
"""
–ü–û–í–ù–ò–ô –ê–ù–ê–õ–Ü–ó –ü–û–ú–ò–õ–ö–ò –ù–ê –ö–†–û–¶–Ü 5 - –©–û –°–ê–ú–ï –ó–õ–ê–ú–ê–õ–û–°–Ø
"""
from pathlib import Path

print("=" * 70)
print("üî¥ –î–ï–¢–ê–õ–¨–ù–ò–ô –ê–ù–ê–õ–Ü–ó –ü–û–ú–ò–õ–ö–ò –ù–ê –ö–†–û–¶–Ü 5")
print("=" * 70)

print("\nüìã –©–û –ë–£–õ–û –í BACKUP (–ü–†–ê–¶–Æ–í–ê–õ–û):")
print("-" * 60)
print("""
–õ–û–ì–Ü–ö–ê –í BACKUP:
1. –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –ø–æ–∑–∏—Ü—ñ—é 'exercises-container' —á–µ—Ä–µ–∑ find()
2. –®—É–∫–∞—î –ø–∞—Ç–µ—Ä–Ω –∑–∞–∫—Ä–∏—Ç—Ç—è –±–ª–æ–∫—É exercises (–∑–∞–∫—Ä–∏–≤–∞—é—á—ñ div –ø–µ—Ä–µ–¥ nav)
3. –í—Å—Ç–∞–≤–ª—è—î –º–Ω–µ–º–æ—Ç–µ—Ö–Ω—ñ–∫—É –ü–Ü–°–õ–Ø exercises, –ü–ï–†–ï–î bottom-nav
4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ–∑–∏—Ü—ñ–π–Ω—É –≤—Å—Ç–∞–≤–∫—É: html[:pos] + new_content + html[pos:]

–ö–û–î:
```python
exercises_pos = html.find('exercises-container')
if exercises_pos > 0:
    pattern = r'(</div>\\n...</div>\\n\\n)(nav class="bottom-nav">)'
    match = re.search(pattern, html[exercises_pos:])
    if match:
        # –í—Å—Ç–∞–≤–∫–∞ –º—ñ–∂ exercises —Ç–∞ nav
        html = html[:insert_pos] + mnemo_vocabulary + mnemo_quiz + html[insert_pos:]
```

–†–ï–ó–£–õ–¨–¢–ê–¢: –ú–Ω–µ–º–æ—Ç–µ—Ö–Ω—ñ–∫–∞ –≤—Å—Ç–∞–≤–ª—è–ª–∞—Å—è –ü–Ü–°–õ–Ø exercises –±–ª–æ–∫—É.
""")

print("\nüìã –©–û –°–¢–ê–õ–û –í –ü–û–¢–û–ß–ù–û–ú–£ (–ù–ï –ü–†–ê–¶–Æ–Ñ):")
print("-" * 60)
print("""
–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê –õ–û–ì–Ü–ö–ê –í –ü–û–¢–û–ß–ù–û–ú–£:
1. –í–∏–∑–Ω–∞—á–∞—î exercises_pattern —è–∫ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –±–ª–æ–∫
2. –ù–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–∞–º—ñ–Ω–∏—Ç–∏ –í–ï–°–¨ –±–ª–æ–∫ exercises
3. –í—Å—Ç–∞–≤–ª—è—î articles_quiz –í–°–ï–†–ï–î–ò–ù–£ exercises
4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î replace() –∑–∞–º—ñ—Å—Ç—å –ø–æ–∑–∏—Ü—ñ–π–Ω–æ—ó –≤—Å—Ç–∞–≤–∫–∏

–ö–û–î:
```python
exercises_pattern = '''</div>
            </div>
        </div>

        <div class="exercises-container">'''
        
if exercises_pattern in html:
    new_pattern = f'''...{articles_quiz}...exercises-container'''
    html = html.replace(old_pattern, new_pattern)
```

–ü–†–û–ë–õ–ï–ú–ò:
- –ù–ï –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É –ø–æ–∑–∏—Ü—ñ—é –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
- –ó–ê–ú–Ü–ù–Ø–Ñ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–º—ñ—Å—Ç—å –¥–æ–¥–∞–≤–∞–Ω–Ω—è
- –õ–ê–ú–ê–Ñ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É
""")

print("\nüìã –©–û –°–ê–ú–ï –ü–Ü–®–õ–û –ù–ï –¢–ê–ö:")
print("-" * 60)
print("""
–ù–ê –ö–†–û–¶–Ü 3 –ø—Ä–æ–º–ø—Ç—É –±—É–ª–æ:

# 3.1 –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞—Ç—á –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è
filesystem:write_file(
    path="scripts/patch_html_positions.py"
    ...
)

# 3.2 –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –ø–∞—Ç—á
subprocess.run(['patch_html_positions.py'])

–ê–õ–ï –ü–ê–¢–ß –ë–£–í –ù–ï–ü–†–ê–í–ò–õ–¨–ù–ò–ô:
- –ó–∞–º—ñ—Å—Ç—å –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –∑ backup
- –°—Ç–≤–æ—Ä–∏–≤ –ù–û–í–£ –Ω–µ—Ä–æ–±–æ—á—É –ª–æ–≥—ñ–∫—É
- –í–∏–¥–∞–ª–∏–≤ –∫—Ä–∏—Ç–∏—á–Ω–∏–π –∫–æ–¥ –ø–æ–∑–∏—Ü—ñ–π–Ω–æ—ó –≤—Å—Ç–∞–≤–∫–∏
""")

print("\nüìã –î–û–î–ê–¢–ö–û–í–Ü –ü–†–û–ë–õ–ï–ú–ò:")
print("-" * 60)

current_file = Path(r"F:\AiKlientBank\KingLearComic\generators\html_lira.py")
with open(current_file, 'r', encoding='utf-8') as f:
    content = f.read()

problems = []

# –ü—Ä–æ–±–ª–µ–º–∞ 1: –í–∏–¥–∞–ª–µ–Ω–∞ –ø–æ–∑–∏—Ü—ñ–π–Ω–∞ –ª–æ–≥—ñ–∫–∞
if "html.find('exercises-container')" not in content:
    problems.append("‚ùå –í–∏–¥–∞–ª–µ–Ω–æ –ø–æ—à—É–∫ –ø–æ–∑–∏—Ü—ñ—ó exercises-container")

# –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–º–∞—î –≤—Å—Ç–∞–≤–∫–∏ –º—ñ–∂ exercises —Ç–∞ nav
if "html[exercises_pos:]" not in content:
    problems.append("‚ùå –í–∏–¥–∞–ª–µ–Ω–æ –ø–æ–∑–∏—Ü—ñ–π–Ω—É –≤—Å—Ç–∞–≤–∫—É —á–µ—Ä–µ–∑ slicing")

# –ü—Ä–æ–±–ª–µ–º–∞ 3: –î–æ–¥–∞–Ω–æ –Ω–µ—Ä–æ–±–æ—á–∏–π –∫–æ–¥
if "if exercises_pattern in html:" in content:
    problems.append("‚ùå –î–æ–¥–∞–Ω–æ –Ω–µ—Ä–æ–±–æ—á—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É pattern")

# –ü—Ä–æ–±–ª–µ–º–∞ 4: generate_vocabulary_cards –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–∞–∑—É
if "generate_vocabulary_cards(self, character):" in content:
    problems.append("‚ùå generate_vocabulary_cards –Ω–µ –ø—Ä–∏–π–º–∞—î phase_id")

for problem in problems:
    print(f"  {problem}")

print("\n" + "=" * 70)
print("üí° –í–ò–°–ù–û–í–û–ö - –ì–û–õ–û–í–ù–ê –ü–†–ò–ß–ò–ù–ê –ù–ï–í–î–ê–ß–Ü:")
print("-" * 60)
print("""
–ü–†–û–ú–ü–¢ –ù–ï –í–ò–ö–û–ù–ê–í–°–Ø –ü–†–ê–í–ò–õ–¨–ù–û —á–µ—Ä–µ–∑:

1. –ö–†–û–ö 3 (–ø–∞—Ç—á html_lira.py):
   - –°—Ç–≤–æ—Ä–∏–≤ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–ò–ô –ø–∞—Ç—á
   - –í–ò–î–ê–õ–ò–í —Ä–æ–±–æ—á–∏–π –∫–æ–¥ –∑ backup
   - –ó–ê–ú–Ü–ù–ò–í –Ω–∞ –Ω–µ—Ä–æ–±–æ—á—É –ª–æ–≥—ñ–∫—É

2. –ö–†–û–ö 4 (CSS —Å—Ç–∏–ª—ñ):
   - –ù–ï –í–ò–ö–û–ù–ê–ù–û –≤–∑–∞–≥–∞–ª—ñ
   - CSS –≥—Ä–∞–¥—ñ—î–Ω—Ç–∏ –Ω–µ –¥–æ–¥–∞–Ω—ñ

3. –ö–†–û–ö 5 (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è):
   - –ó–∞–ø—É—Å—Ç–∏–≤—Å—è –∑ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–ò–ú –∫–æ–¥–æ–º
   - –ó–≥–µ–Ω–µ—Ä—É–≤–∞–≤ HTML –∑ –ø–æ–º–∏–ª–∫–∞–º–∏

–†–Ü–®–ï–ù–ù–Ø:
1. –í–Ü–î–ù–û–í–ò–¢–ò –∫–æ–¥ –∑ backup_mnemo
2. –î–û–î–ê–¢–ò CSS –≥—Ä–∞–¥—ñ—î–Ω—Ç–∏ –≤ mnemonics_gen
3. –í–ò–ü–†–ê–í–ò–¢–ò –ø–µ—Ä–µ–¥–∞—á—É phase_id
4. –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Å–∞–π—Ç

–ë–ï–ó –í–Ü–î–ù–û–í–õ–ï–ù–ù–Ø BACKUP - –ø—Ä–æ–±–ª–µ–º–∞ –ù–ï –í–ò–†–Ü–®–ò–¢–¨–°–Ø!
""")
